import{I as K,bf as Fe,bg as we,A as x,aH as z,G as le,B as w,e as g,D as H,bh as Ae,d as _e,X as ke,F as Be,aF as xe,aA as Y,aI as Ke,bi as Z,bj as Ie,aJ as Le,r as k,aC as se,aM as Q,w as B,C as L,f as ue,E as t,aO as N,P as T,bk as Te,bl as $e,o as Pe,aD as V,aE as j,aQ as re,bm as Se,g as de,aB as ce,bn as Ve,bo as He}from"./-ou12Yc7.js";import{f as Oe}from"./BEsf_cOP.js";function Re(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}function De(u){return K(()=>{var a;return Fe(u)?!!((a=we(u))!=null&&a.closest("form")):!0})}const Me=x({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(u){const a=u,{primitiveElement:n,currentElement:i}=z(),r=K(()=>a.checked??a.value);return le(r,(s,m)=>{if(!i.value)return;const b=i.value,d=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(d,"value").set;if(c&&s!==m){const v=new Event("input",{bubbles:!0}),A=new Event("change",{bubbles:!0});c.call(b,s),b.dispatchEvent(v),b.dispatchEvent(A)}}),(s,m)=>(g(),w(Ae,H({ref_key:"primitiveElement",ref:n},{...a,...s.$attrs},{as:"input"}),null,16))}}),Ne=x({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(u){const a=u,n=K(()=>typeof a.value=="string"||typeof a.value=="number"||typeof a.value=="boolean"?[{name:a.name,value:a.value}]:typeof a.value=="object"&&Array.isArray(a.value)?a.value.flatMap((i,r)=>typeof i=="object"?Object.entries(i).map(([s,m])=>({name:`[${a.name}][${r}][${s}]`,value:m})):{name:`[${a.name}][${r}]`,value:i}):a.value!==null&&typeof a.value=="object"&&!Array.isArray(a.value)?Object.entries(a.value).map(([i,r])=>({name:`[${a.name}][${i}]`,value:r})):[]);return(i,r)=>(g(!0),_e(Be,null,ke(n.value,s=>(g(),w(Me,H({key:s.name,ref_for:!0},{...a,...i.$attrs},{name:s.name,value:s.value}),null,16,["name","value"]))),128))}});function je(u,a,n){return u===void 0?!1:Array.isArray(u)?u.some(i=>S(i,a,n)):S(u,a,n)}function S(u,a,n){return u===void 0||a===void 0?!1:typeof u=="string"?u===a:typeof n=="function"?n(u,a):typeof n=="string"?(u==null?void 0:u[n])===(a==null?void 0:a[n]):xe(u,a)}const[ee,qe]=Y("ListboxRoot"),ze=x({__name:"ListboxRoot",props:{modelValue:{},defaultValue:{},multiple:{type:Boolean},orientation:{default:"vertical"},dir:{},disabled:{type:Boolean},selectionBehavior:{default:"toggle"},highlightOnHover:{type:Boolean},by:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(u,{expose:a,emit:n}){const i=u,r=n,{multiple:s,highlightOnHover:m,orientation:b,disabled:d,selectionBehavior:E,dir:c}=Ke(i),{getItems:v}=Z({isProvider:!0}),{handleTypeaheadSearch:A}=Ie(),{primitiveElement:O,currentElement:p}=z(),_=Re(),R=Le(c),fe=De(p),D=k(),$=k(!1),q=k(!0),h=se(i,"modelValue",r,{defaultValue:i.defaultValue??(s.value?[]:void 0),passive:i.modelValue===void 0,deep:!0});function pe(e){if($.value=!0,i.multiple){const o=Array.isArray(h.value)?[...h.value]:[],l=o.findIndex(f=>S(f,e,i.by));i.selectionBehavior==="toggle"?(l===-1?o.push(e):o.splice(l,1),h.value=o):(h.value=[e],D.value=e)}else i.selectionBehavior==="toggle"&&S(h.value,e,i.by)?h.value=void 0:h.value=e;setTimeout(()=>{$.value=!1},1)}const y=k(null),G=k(null),I=k(!1),U=k(!1),te=Q(),W=Q(),ae=Q();function X(){return v().map(e=>e.ref).filter(e=>e.dataset.disabled!=="")}function C(e,o=!0){if(!e)return;y.value=e,q.value&&y.value.focus(),o&&y.value.scrollIntoView({block:"nearest"});const l=v().find(f=>f.ref===e);r("highlight",l)}function ve(e){if(I.value)ae.trigger(e);else{const o=v().find(l=>S(l.value,e,i.by));o&&(y.value=o.ref,C(o.ref))}}function me(e){y.value&&y.value.isConnected&&(e.preventDefault(),e.stopPropagation(),U.value||y.value.click())}function he(e){if(q.value){if($.value=!0,I.value)W.trigger(e);else{const o=e.altKey||e.ctrlKey||e.metaKey;if(o&&e.key==="a"&&s.value){const l=v(),f=l.map(F=>F.value);h.value=[...f],e.preventDefault(),C(l[l.length-1].ref)}else if(!o){const l=A(e.key,v());l&&C(l)}}setTimeout(()=>{$.value=!1},1)}}function ye(){U.value=!0}function be(){requestAnimationFrame(()=>{U.value=!1})}function ne(){N(()=>{const e=new KeyboardEvent("keydown",{key:"PageUp"});oe(e)})}function J(e){const o=y.value;o!=null&&o.isConnected&&(G.value=o),y.value=null,r("leave",e)}function ge(e){var l,f;const o=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if((l=e.currentTarget)==null||l.dispatchEvent(o),r("entryFocus",o),!o.defaultPrevented)if(G.value)C(G.value);else{const F=(f=X())==null?void 0:f[0];C(F)}}function oe(e){const o=Te(e,b.value,R.value);if(!o)return;let l=X();if(y.value){if(o==="last")l.reverse();else if(o==="prev"||o==="next"){o==="prev"&&l.reverse();const f=l.indexOf(y.value);l=l.slice(f+1)}Ee(e,l[0])}if(l.length){const f=!y.value&&o==="prev"?l.length-1:0;C(l[f])}if(I.value)return W.trigger(e)}function Ee(e,o){var f;if(!(I.value||i.selectionBehavior!=="replace"||!s.value||!Array.isArray(h.value)||(e.altKey||e.ctrlKey||e.metaKey)&&!e.shiftKey)&&e.shiftKey){const F=v().filter(P=>P.ref.dataset.disabled!=="");let M=(f=F.find(P=>P.ref===o))==null?void 0:f.value;if(e.key===_.END?M=F[F.length-1].value:e.key===_.HOME&&(M=F[0].value),!M||!D.value)return;const Ce=Oe(F.map(P=>P.value),D.value,M);h.value=Ce}}async function ie(e){if(await N(),I.value)te.trigger(e);else{const o=X(),l=o.find(f=>f.dataset.state==="checked");l?C(l):o.length&&C(o[0])}}return le(h,()=>{$.value||N(()=>{ie()})},{immediate:!0,deep:!0}),a({highlightedElement:y,highlightItem:ve,highlightFirstItem:ne,highlightSelected:ie,getItems:v}),qe({modelValue:h,onValueChange:pe,multiple:s,orientation:b,dir:R,disabled:d,highlightOnHover:m,highlightedElement:y,isVirtual:I,virtualFocusHook:te,virtualKeydownHook:W,virtualHighlightHook:ae,by:i.by,firstValue:D,selectionBehavior:E,focusable:q,onLeave:J,onEnter:ge,changeHighlight:C,onKeydownEnter:me,onKeydownNavigation:oe,onKeydownTypeAhead:he,onCompositionStart:ye,onCompositionEnd:be,highlightFirstItem:ne}),(e,o)=>(g(),w(t(T),{ref_key:"primitiveElement",ref:O,as:e.as,"as-child":e.asChild,dir:t(R),"data-disabled":t(d)?"":void 0,onPointerleave:J,onFocusout:o[0]||(o[0]=async l=>{const f=l.relatedTarget||l.target;await N(),y.value&&t(p)&&!t(p).contains(f)&&J(l)})},{default:B(()=>[L(e.$slots,"default",{modelValue:t(h)}),t(fe)&&e.name?(g(),w(t(Ne),{key:0,name:e.name,value:t(h),disabled:t(d),required:e.required},null,8,["name","value","disabled","required"])):ue("",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),Ye=x({__name:"ListboxFilter",props:{modelValue:{},autoFocus:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"input"}},emits:["update:modelValue"],setup(u,{emit:a}){const n=u,r=se(n,"modelValue",a,{defaultValue:"",passive:n.modelValue===void 0}),s=ee();s.focusable.value=!1;const{primitiveElement:m,currentElement:b}=z(),d=K(()=>n.disabled||s.disabled.value||!1),E=k();return $e(()=>{var c;return E.value=(c=s.highlightedElement.value)==null?void 0:c.id}),Pe(()=>{setTimeout(()=>{var c;n.autoFocus&&((c=b.value)==null||c.focus())},1)}),(c,v)=>(g(),w(t(T),{ref_key:"primitiveElement",ref:m,as:c.as,"as-child":c.asChild,value:t(r),disabled:d.value?"":void 0,"data-disabled":d.value?"":void 0,"aria-disabled":d.value??void 0,"aria-activedescendant":E.value,type:"text",onKeydown:[V(j(t(s).onKeydownNavigation,["prevent"]),["down","up","home","end"]),V(t(s).onKeydownEnter,["enter"])],onInput:v[0]||(v[0]=A=>{r.value=A.target.value,t(s).highlightFirstItem(A)}),onCompositionstart:t(s).onCompositionStart,onCompositionend:t(s).onCompositionEnd},{default:B(()=>[L(c.$slots,"default",{modelValue:t(r)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),[Ze,Ge]=Y("ListboxGroup"),et=x({__name:"ListboxGroup",props:{asChild:{type:Boolean},as:{}},setup(u){const a=u,n=re(void 0,"reka-listbox-group");return Ge({id:n}),(i,r)=>(g(),w(t(T),H({role:"group"},a,{"aria-labelledby":t(n)}),{default:B(()=>[L(i.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),tt=x({__name:"ListboxContent",props:{asChild:{type:Boolean},as:{}},setup(u){const{CollectionSlot:a}=Z(),n=ee(),i=Se(!1,10);return(r,s)=>(g(),w(t(a),null,{default:B(()=>[de(t(T),{role:"listbox",as:r.as,"as-child":r.asChild,tabindex:t(n).focusable.value?t(n).highlightedElement.value?"-1":"0":void 0,"aria-orientation":t(n).orientation.value,"aria-multiselectable":!!t(n).multiple.value,"data-orientation":t(n).orientation.value,onMousedown:s[0]||(s[0]=j(m=>i.value=!0,["left"])),onFocus:s[1]||(s[1]=m=>{t(i)||t(n).onEnter(m)}),onKeydown:[s[2]||(s[2]=V(j(m=>{t(n).focusable.value&&t(n).onKeydownNavigation(m)},["prevent"]),["down","up","left","right","home","end"])),V(t(n).onKeydownEnter,["enter"]),t(n).onKeydownTypeAhead]},{default:B(()=>[L(r.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),Ue="listbox.select",[We,Xe]=Y("ListboxItem"),at=x({__name:"ListboxItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"div"}},emits:["select"],setup(u,{emit:a}){const n=u,i=a,r=re(void 0,"reka-listbox-item"),{CollectionItem:s}=Z(),{forwardRef:m,currentElement:b}=ce(),d=ee(),E=K(()=>b.value===d.highlightedElement.value),c=K(()=>je(d.modelValue.value,n.value,d.by)),v=K(()=>d.disabled.value||n.disabled);async function A(p){i("select",p),!(p!=null&&p.defaultPrevented)&&!v.value&&p&&(d.onValueChange(n.value),d.changeHighlight(b.value))}function O(p){const _={originalEvent:p,value:n.value};He(Ue,A,_)}return Xe({isSelected:c}),(p,_)=>(g(),w(t(s),{value:p.value},{default:B(()=>[Ve([E.value,c.value],()=>de(t(T),H({id:t(r)},p.$attrs,{ref:t(m),role:"option",tabindex:t(d).focusable.value?E.value?"0":"-1":-1,"aria-selected":c.value,as:p.as,"as-child":p.asChild,disabled:v.value?"":void 0,"data-disabled":v.value?"":void 0,"data-highlighted":E.value?"":void 0,"data-state":c.value?"checked":"unchecked",onClick:O,onKeydown:V(j(O,["prevent"]),["space"]),onPointermove:_[0]||(_[0]=R=>{t(d).highlightedElement.value!==t(b)&&(t(d).highlightOnHover.value?t(d).changeHighlight(t(b),!1):t(d).focusable.value||t(d).changeHighlight(t(b),!1))})}),{default:B(()=>[L(p.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),_,1)]),_:3},8,["value"]))}}),nt=x({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean},as:{default:"span"}},setup(u){const a=u;ce();const n=We();return(i,r)=>t(n).isSelected.value?(g(),w(t(T),H({key:0,"aria-hidden":"true"},a),{default:B(()=>[L(i.$slots,"default")]),_:3},16)):ue("",!0)}});export{ze as _,Ye as a,et as b,at as c,nt as d,tt as e,Ne as f,ee as g,Ze as i,De as u};
